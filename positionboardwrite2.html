<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NomaCircle</title>

  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Anek+Tamil&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">  

  <style>
    body {
      font-family: 'Gowun Dodum', sans-serif;
      background: url('assets/background2.png') no-repeat center center/cover;
      height: 100vh;
     display: flex;
     justify-content: center;
     align-items: center;
     background-size: cover; /* 이미지가 화면을 덮도록 설정 */
}

    .board-container {
      position: absolute;
      top: 15%; /* 아래로 약간 내리기 */
      left: 10%;
      width: 85%;
      height:750px;
      max-width: 5000px;
      max-height:3500px;
      background-color: rgba(0, 0, 0, 0.6); /* 투명 배경 */
      align-items:center;
      border-radius: 30px;
      padding: 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); /* 그림자 */
      margin-right:240px;
    }

    .board-title {
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 15px;
      font-family: 'Gowun Dodum';
    }

    .board-input {
      display: flex;
      flex-direction: column;
      gap: 15px;
      font-family: 'Gowun Dodum';
    }

    .board-input textarea {
      width: 100%;
      height: 530px;
      border: none;
      border-radius: 15px;
      background-color: rgba(255, 255, 255, 0.1);
      font-size: 26px;
      text-align: center;
      color: white; /* 텍스트 색상 */

      font-family:'Gowun Dodum';
      padding: 15px;
      resize: none;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .board-input textarea::placeholder1 {
      color: rgba(255, 255, 255, 0.6); /* 플레이스홀더 색상 */
      font-family:'Gowun Dodum';
    }

    
    .board-input textarea::placeholder2 {
      color: rgba(255, 255, 255, 0.6); /* 플레이스홀더 색상 */
      font-family:'Gowun Dodum';
    }

    .board-submit {
      display: flex;
      justify-content: flex-end;
      font-family:'Gowun Dodum';

    }

    .board-submit button {
      padding: 10px 20px;
      font-size: 26px;
      color: #fff;
      background-color: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-family:'Gowun Dodum';
      margin-top:20px;
    }

    .board-submit button:hover {
      background-color: #4c4caa;
    }


    .board-title input {
  width: 100%; /* 제목 필드 너비 */
  height: 50px; /* 높이 조정 */
  border: none; /* 테두리 제거 */
  background-color: rgba(255, 255, 255, 0.0001); /* 투명 배경 */
  font-size: 36px; /* 글씨 크기 */
  text-align: center; /* 텍스트 중앙 정렬 */
  color: white; /* 텍스트 색상 */
  font-family: 'Gowun Dodum', sans-serif; /* 글꼴 */
  padding: 10px; /* 내부 여백 */
  border-bottom: 1.2px solid #fff;
  text-align:left;
  margin-top:10px;
  margin-bottom:10px;
  padding-bottom:30px;

}

.board-title input::placeholder {
  color: rgba(255, 255, 255, 0.6); /* 플레이스홀더 색상 */
}



    a {
        text-decoration: none; /* 기본 밑줄 제거 */
        position: relative;
    }
  </style>
  
</head>
<body>

    <div class="sidebar" style="position: fixed;" >
        <ul>
            <li>
                <a href = "profile.html#profileScreen">
                    <img src="assets/profile-icon-white.png" alt="Profile">
                </a>
            </li>
            <li>
                <a href = "main.html">
                    <img src="assets/home-icon-white.png" alt="Home">
                </a>
            </li>
            <li>
                <a href="map.html">
                    <img src="assets/map-icon-white.png" alt="Map">
                </a>
            </li>
            <li>
                <a href="networking.html">
                    <img src="assets/chat-icon-white.png" alt="Chat">
                </a>
            </li>
            <li>
                <div class="whitelogo-sidebar">
                    <img src="assets/onlylogowhite2.png" alt="Logo">
                </div>
            </li>
        </ul>
    </div>

  <!-- 포지션보드 화면 -->
  <div class="nonameboardwriteScreen">
      <div class="nonameboardwrite-title">
        <img src="assets/포지션보드.png" alt="Emoji">
        <h1>포지션 보드</h1>
      </div>
      <div class="horizontal-line1"></div>
   </div>

   <div class="board-container">
    <!-- 글 제목 입력 -->
    <div class="board-title">
      <input type="text" id="title" placeholder="글 제목을 작성해 주세요." required>
    </div>
    <!-- 본문 입력 -->
    <div class="board-input">
      <textarea id="content" placeholder="본문을 작성해 주세요." required></textarea>
    </div>
    <!-- 완료 버튼 -->
    <div class="board-submit">
          <button>완료</button>
    </div>
  </div>
  






  <script>
    document.querySelector('.board-submit button').addEventListener('click', async () => {
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').value;
    
      if (!title || !content) {
        alert('제목과 내용을 모두 입력해주세요.');
        return;
      }
    
      const positionId = 2;  // position_id를 1로 고정
    
      try {
        const response = await fetch(`http://127.0.0.1:8000/network/position/${positionId}/posts/`, { 
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('accessToken')}`, // JWT 토큰을 Authorization 헤더에 포함
          },
          body: JSON.stringify({
            title: title,
            content: content,
          }),
        });
    
        if (response.ok) {
          alert('게시글이 작성되었습니다.');
          window.location.href = `positionboard-backend.html`; // 게시글 작성 후 목록 페이지로 이동
        } else {
          const errorData = await response.json();
          alert(`게시글 작성 실패: ${errorData.message || '알 수 없는 오류'}`);
        }
      } catch (error) {
        console.error('게시글 작성 중 오류 발생:', error);
        alert(`게시글 작성에 실패했습니다: ${error.message}`);
      }
    });



  </script>
</body>
</html>
